<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <!-- Service contract for the single SKU WebAPI endpoint -->
    <preference for="Nacento\Connector\Api\CustomGalleryManagementInterface"
                type="Nacento\Connector\Model\GalleryProcessor"/>

    <!-- DTO for the image payload -->
    <preference for="Nacento\Connector\Api\Data\ImageEntryInterface"
                type="Nacento\Connector\Model\Data\ImageEntry"/>

    <!-- Service contracts and DTOs for the bulk processing endpoints -->
    <preference for="Nacento\Connector\Api\BulkGalleryManagementInterface"
                type="Nacento\Connector\Model\GalleryProcessorBulk"/>

    <preference for="Nacento\Connector\Api\Data\BulkRequestInterface"
                type="Nacento\Connector\Model\Data\BulkRequest"/>

    <preference for="Nacento\Connector\Api\Data\BulkItemInterface"
                type="Nacento\Connector\Model\Data\BulkItem"/>

    <preference for="Nacento\Connector\Api\Data\BulkResultInterface"
                type="Nacento\Connector\Model\Data\BulkResult"/>

    <preference for="Nacento\Connector\Api\Data\BulkSkuResultInterface"
                type="Nacento\Connector\Model\Data\BulkSkuResult"/>

    <preference for="Nacento\Connector\Api\Data\BulkStatsInterface"
                type="Nacento\Connector\Model\Data\BulkStats"/>

    <preference for="Nacento\Connector\Api\Data\ImageStatsInterface"
                type="Nacento\Connector\Model\Data\ImageStats"/>

    <!-- Service contract for the asynchronous bulk gallery planner -->
    <preference for="Nacento\Connector\Api\BulkGalleryAsyncManagementInterface"
                type="Nacento\Connector\Model\BulkGalleryAsyncManagement"/>

    <!-- DTO for the asynchronous processing message topic -->
    <preference for="Nacento\Connector\Api\Data\ProcessGalleryMessageInterface"
                type="Nacento\Connector\Model\Data\ProcessGalleryMessage"/>

    <!-- Register console command: bin/magento nacento:connector:doctor -->
    <type name="Symfony\Component\Console\Application">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="nacento_connector_doctor"
                      xsi:type="object">Nacento\Connector\Console\Command\DoctorCommand</item>
            </argument>
        </arguments>
    </type>
    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="nacento_connector_doctor" xsi:type="object">
                    Nacento\Connector\Console\Command\DoctorCommand
                </item>
            </argument>
        </arguments>
    </type>

</config>
